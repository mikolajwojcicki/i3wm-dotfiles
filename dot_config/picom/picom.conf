# --- Backend i Wydajność ---
# Use OpenGL backend for Intel Iris Xe
backend = "glx";

# VSync is critical to prevent tearing
vsync = true;

# GLX specific optimizations for Intel
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
use-damage = true;

# Prevent flickering on some Intel drivers
unredir-if-possible = false;

# --- Cienie (Shadows) ---
shadow = true;
shadow-radius = 12;
shadow-offset-x = -12;
shadow-offset-y = -12;
shadow-opacity = 0.5;
# Wykluczenia cieni (np. dla paska polybar, żeby nie rzucał cienia na okna)
shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Polybar'",
  "class_g ?= 'Notify-osd'",
  "_GTK_FRAME_EXTENTS@:c"
];

# --- Przezroczystość (Opacity) ---
active-opacity = 1.0;
inactive-opacity = 0.95;
frame-opacity = 1.0;
inactive-opacity-override = false;

# Reguły przezroczystości dla konkretnych aplikacji
opacity-rule = [
  "95:class_g = 'Kitty'",
  "100:class_g = 'Rofi'",
  "100:class_g = 'firefox'",
  "100:class_g = 'Chromium'"
];

# --- Fading (Zanikanie okien) ---
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 5;

# --- Ustawienia ogólne ---
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;

# Log level (useful for debugging)
log-level = "warn";